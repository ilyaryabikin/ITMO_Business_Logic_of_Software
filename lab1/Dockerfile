FROM bellsoft/liberica-openjre-debian:11.0.9.1-1

ARG APPLICATION_ARTIFACT_NAME
ARG APPLICATION_VERSION
ARG DATABASE_HOST
ARG DATABASE_PORT

RUN apt-get update && apt-get install -y wait-for-it

COPY target/${APPLICATION_ARTIFACT_NAME}-${APPLICATION_VERSION}.jar /${APPLICATION_ARTIFACT_NAME}.jar

ENV APP_ARTIFACT=${APPLICATION_ARTIFACT_NAME}
ENV DB_HOST=${DATABASE_HOST}
ENV DB_PORT=${DATABASE_PORT}

ENTRYPOINT exec wait-for-it ${DB_HOST}:${DB_PORT} -- java -jar /${APP_ARTIFACT}.jar
